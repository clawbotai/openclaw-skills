# 2026-02-12

## Skill Lifecycle Integration

- User asked to verify all skill errors flow through skill-lifecycle monitor → discovered **zero integration exists**
- No other skills import or use `SkillMonitor` — the monitor was fully built but completely standalone
- `memory/skill-errors.json` never existed (monitor never ran)
- `monitor.py` had Python 3.9 syntax errors (nested triple-quotes in docstrings) — fixed

### Built: Monitored Skill Runner
- Created `skills/skill-lifecycle/scripts/run_monitored.py` — wraps any shell command through SkillMonitor
- Created `bin/skillrun` convenience wrapper
- Usage: `bin/skillrun <skill-name> [--timeout N] -- <command...>`
- Exit 98 = quarantined, errors auto-logged, repair tickets generated at 3+ occurrences
- Updated TOOLS.md with the convention
- Committed: `398bebc`

### Key Decision
- Went with **Pattern B** (agent-level wrapping) over Pattern A (editing every skill) — more practical since most skills are invoked via shell commands
- This is a **behavioral change** — I need to remember to use `skillrun` when invoking skills

## Skill Scout Evolution (Evo Loop)

- Full evolutionary loop applied to skill-scout
- Phase 1: Code review of all 3,300 LOC, identified 7 real issues
- Phase 2: 5 tasks completed, tests grew from 29→45
- Key changes:
  - Quarantine workflow: skills download to `_quarantine/` before evaluation
  - 16 new tests for markdown scanner + AST evasion
  - Batch DB writes in awesome list parser
  - Error boundary in threaded sweep workers
  - Compatibility checker false-positive fixes (self-referential regex, local imports)
- Committed: `b4901aa`

### Geni Evaluation
- User asked to evaluate Geni's analysis of skill-scout
- Geni fabricated: ClawHavoc campaign, Koi Security, 341 malicious skills, VirusTotal partnership
- Geni was wrong about: Python 3.9 stdlib (already hardcoded), SQLite locking (already has _write_lock)
- Geni was right about: SKILL.md not scanned (genuine gap), AST evasion possible
- Lesson: **always read actual code before trusting another AI's architectural review**

## Email
- iCloud IMAP auth failing — app-specific password in keychain (`icloud-email`) may be expired/revoked
- Needs user to regenerate at appleid.apple.com

## Agent-Memory Evo Loop
- Applied evolutionary loop — code was well-built, needed config/integration not rewrite
- **Critical fix**: DB path resolved to `skills/memory/` instead of `memory/` (walked 2 levels up from scripts/ instead of 3)
- Cleared test data (Alice/Bob/GraphQL fake memories)
- Made numpy import lazy (stats/help no longer load model)
- Created requirements.txt (sentence-transformers, numpy)
- Imported 26 memory chunks from 3 daily note files into vector store
- Updated HEARTBEAT.md with memory maintenance + daily import tasks
- Vector search verified working — query "skill lifecycle monitor" returns correct top result (0.57 cosine sim)
- DB at `memory/agent_memory.db` (124KB, 26 episodic memories)

## Skill Cleanup — Major Audit
- Evaluated all 27 skills systematically by code presence, LOC, relevance
- **Removed 12 skills total:**
  - construction-management, business-development (earlier in session)
  - api-design, data-engineering, growth-strategy, payments, performance-engineering, qa-engineering, hipaa-compliance, mobile-architect (31 lines!), structure-standard, ml-engineering
  - hyperliquid-trading
- All were prompt-only reference skills with zero code, niche/overlapping with base knowledge
- Also removed false `skills/memory/` directory (created by agent-memory DB path bug)
- **Down to 14 skills** — all with real code or genuine utility
- Remaining: agent-guardrails, agent-memory, agent-orchestration, devops, docs-engine, email-manager, observability, product-management, python-backend, security, skill-lifecycle, skill-scout, task-planner, web-builder

## Product-Management → Removed
- User said remove it. Down to **13 skills**.

## Git Cleanup — Legacy Root Directories
- GitHub was showing ~40 old skill directories at repo root (pre-consolidation leftovers)
- Removed 40 directories (363 files) that existed alongside the `skills/` folder
- Repo root now clean: bin/, memory/, prompts/, scripts/, skills/, config files
- Committed: `d93f01c`

## skill-creator-extended — Built via Sub-Agent
- Sub-agent (Opus, high reasoning) wrote `architect_skill.py` — 1,056 lines
- 4-phase autonomous pipeline: Research → Architecture → Implementation → Validation
- Uses OpenAI structured outputs, DuckDuckGo search, rich terminal UI, self-correction loop
- Saved to `skills/skill-creator-extended/`

## skill-lifecycle Rebuild Test — architect_skill.py FAILED
- Tried to rebuild skill-lifecycle using architect_skill.py as a real-world test
- **GPT-4o produced 323 LOC vs original 2,237 LOC** — missing most features
- Used `transitions` library despite prompt saying "stdlib-only" — constraint not enforced
- Reference files were 1-line stubs (100 bytes each)
- init_skill.py invocation used wrong CLI flags (--name/--output don't exist)
- DuckDuckGo search returned 0 results (query too long — full prompt as search query)
- **Restored original from backup** — AI-generated replacement was 7× smaller
- Key lesson: architect_skill.py good for scaffolding new simple skills, not rebuilding complex ones

## Evo Loop Applied to architect_skill.py — 7 Fixes
1. **Constraint forwarding** — added `_extract_constraints()` that detects stdlib-only, Python version, JSON output from prompt and injects as hard constraints into every LLM persona
2. **Search queries** — extract first sentence (≤120 chars) instead of full prompt
3. **init_skill.py flags** — fixed to positional arg + `--path` + `--resources`
4. **Reference file generation** — now generates real content via LLM (not 1-line stubs)
5. **Research summary** — always display, not gated behind --verbose
6. **ddgs import** — try new package name first, fallback to legacy
7. **SKILL.md** — created proper one (was missing entirely)
- Verified with hello-world smoke test: 22s, stdlib-only respected, validation passed, code runs
- Committed: `e4fa597`

## Reflection — SOUL.md Updated
- Encoded 6 learned behaviors into SOUL.md:
  1. Python 3.9 compat (Optional[X], no nested triple-quotes)
  2. No sys.exit() in library functions
  3. Always read code before trusting AI reviews
  4. LLM constraint enforcement in orchestration
  5. bin/skillrun convention
  6. Back up before destructive replacements
- Committed: `62c3552`

## Workspace State
- **13 skills**, 15,596 Python LOC total
- All pushed to GitHub: github.com/clawbotai/openclaw-skills
- WhatsApp reconnected after brief disconnect (08:58)
- User sent a Revolut compliance letter (PDF) about address mismatch for Portugal Golden Visa — no action taken yet, user didn't ask for help with it
